.main-pool-category {
    margin-bottom: 3rem;
    padding: var(--padding-large);
    background: var(--bg-secondary);
    border: 1px solid var(--accent-secondary);
    border-radius: var(--border-radius-medium);
}
.main-pool-category h3 { margin-bottom: var(--gap-large); }
.main-pool-category .category-description { margin-bottom: var(--gap-large); line-height: 1.5; }
.purchased-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--padding-small);
    margin: 0.25rem 0;
    background: var(--bg-primary);
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--accent-secondary);
}
.purchased-item .item-info { flex: 1; display: flex; align-items: center; gap: var(--gap-medium); }
.purchased-item .item-name { color: var(--accent-primary); font-weight: bold; min-width: 120px; }
.purchased-item .item-cost, .purchased-item .item-details {
    color: var(--accent-highlight);
    font-weight: bold;
    background: var(--bg-primary);
    padding: 0.25rem 0.5rem;
    border: 1px solid var(--accent-secondary);
    font-size: 0.8em;
    white-space: nowrap;
}

.purchased-item .item-cost.total-cost {
    background: var(--accent-primary);
    border-color: var(--accent-primary);
    color: var(--bg-primary);
    align-self: center;
}
.trait-card-horizontal { display: flex; align-items: center; justify-content: space-between; min-height: 60px; margin-bottom: var(--gap-small); }
.trait-card-horizontal .trait-stats, .trait-card-horizontal .trait-conditions { flex: 1; font-size: 0.9em; }
.trait-card-horizontal .trait-cost { margin-left: var(--gap-medium); }
.trait-builder-content { background: var(--bg-primary); border: 1px solid var(--accent-secondary); padding: var(--padding-large); margin-top: var(--gap-large); border-radius: var(--border-radius-medium); }
.builder-step { margin-bottom: 2.5rem; border-bottom: 1px solid var(--accent-secondary); padding-bottom: var(--padding-large); }
.stat-selection, .condition-grid { display: grid; gap: var(--gap-medium); margin: var(--gap-large) 0; }
.stat-option, .condition-option { background: var(--bg-secondary); border: 1px solid var(--accent-secondary); padding: var(--padding-medium); transition: all 0.3s ease; border-radius: var(--border-radius-medium); }
.stat-option:hover, .condition-option:hover { border-color: var(--accent-primary); }
.stat-option label, .condition-option label { color: var(--text-light); font-weight: bold; display: flex; align-items: center; gap: var(--gap-small); cursor: pointer; margin-bottom: var(--gap-small); }
.stat-option small, .condition-option small { color: var(--text-muted); font-size: 0.8em; display: block; margin-top: 0.25rem; line-height: 1.3; }
.condition-tier { margin-bottom: 2rem; }
.condition-tier h7 { color: var(--accent-secondary); font-weight: bold; display: block; margin-bottom: var(--padding-medium); font-size: 1.1em; }
.selection-summary { background: var(--bg-secondary); border: 1px solid var(--accent-primary); padding: var(--padding-medium); color: var(--accent-primary); font-weight: bold; margin-top: var(--gap-large); border-radius: var(--border-radius-medium); }
.tier-budget { background: var(--bg-secondary); border: 1px solid var(--accent-secondary); padding: var(--padding-medium); color: var(--text-light); font-weight: bold; margin-bottom: var(--gap-large); border-radius: var(--border-radius-medium); }
.builder-actions { display: flex; justify-content: space-between; align-items: center; margin-top: var(--gap-large); padding-top: var(--padding-medium); border-top: 1px solid var(--accent-secondary); }

.upgrade-preview .purchase-actions { 
    display: flex !important; 
    align-items: center; 
    justify-content: space-between; 
    gap: var(--gap-medium); 
    margin-top: var(--gap-medium); 
    padding-top: var(--padding-small); 
    border-top: 1px solid var(--accent-secondary); 
}

.upgrade-preview .purchase-actions .total-cost {
    background: var(--bg-secondary);
    border: 1px solid var(--accent-primary);
    padding: var(--padding-small);
    border-radius: var(--border-radius-small);
    color: var(--accent-primary);
    font-weight: bold;
    font-size: 0.9em;
    white-space: nowrap;
    flex-shrink: 0;
}

.upgrade-preview .purchase-actions .btn {
    flex-shrink: 0;
}
.trait-builder-content .form-group, .unique-ability-section .form-group { margin-bottom: var(--gap-large); }
.point-pool-display { background: var(--bg-primary); border: 1px solid var(--accent-primary); padding: var(--padding-large); margin-bottom: 2rem; }
.pool-summary { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--gap-medium); padding-bottom: var(--gap-medium); border-bottom: 1px solid var(--accent-secondary); }
.pool-main { display: flex; gap: 2rem; align-items: center; }
.pool-main span { color: var(--text-light); font-weight: bold; }
.pool-main .remaining { color: var(--accent-primary); font-size: 1.2em; }
.pool-summary.over-budget .remaining { color: var(--error-color); }
.pool-summary.fully-used .remaining { color: var(--accent-highlight); }
.breakdown-grid, .spending-grid { display: grid; gap: var(--gap-medium); grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
.breakdown-item, .spending-item { display: flex; justify-content: space-between; align-items: center; padding: var(--padding-small); background: var(--bg-secondary); border: 1px solid var(--accent-secondary); border-radius: var(--border-radius-medium); transition: all 0.2s ease; }
.breakdown-item:hover, .spending-item:hover { background: rgba(0, 255, 255, 0.05); border-color: var(--accent-primary); }
.breakdown-label { color: var(--text-primary); font-weight: 500; }
.breakdown-count { color: var(--accent-primary); font-weight: bold; background: var(--bg-primary); padding: 0.25rem 0.5rem; border-radius: var(--border-radius-small); font-size: 0.9em; }
.breakdown-cost { color: var(--accent-secondary); font-weight: bold; font-size: 0.9em; }
.spending-item.flaw-cost { border-color: var(--accent-highlight); background: rgba(0, 255, 255, 0.1); }
.flaw-purchase-section { }
.section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--gap-medium); padding-bottom: var(--padding-small); border-bottom: 1px solid var(--accent-secondary); }
.section-header h4 { margin: 0; color: var(--accent-primary); }
.points-remaining { font-weight: bold; font-size: 1.1em; }
.points-remaining .over-budget { color: var(--error-color); }
.economics-notice { background: rgba(0, 255, 255, 0.1); border: 1px solid var(--accent-primary); border-radius: var(--border-radius-medium); padding: var(--padding-medium); margin-bottom: var(--gap-large); }
.flaw-card { border-width: 2px; border-radius: var(--border-radius-large); min-height: 220px; display: flex; flex-direction: column; justify-content: space-between; padding: var(--padding-large); }
.flaw-card .card-header { margin-bottom: 0.75rem; padding: 0; border-bottom: none; }
.flaw-card .card-title { font-size: 1.1em; }
.flaw-card .card-cost { padding: 0.4rem 0.7rem; box-shadow: 0 2px 4px rgba(0, 255, 255, 0.3); }
.flaw-card .card-description { margin: 0.75rem 0; }
.flaw-restriction { background: rgba(255, 170, 0, 0.05); border: 1px solid var(--warning-color); border-left-width: 3px; padding: 0.5rem; margin-top: 0.5rem; border-radius: var(--border-radius-medium); font-size: 0.85em; color: var(--text-muted); display: none; }
.flaw-restriction strong { color: var(--warning-color); }
.flaw-purchase-options { border-top: 1px solid rgba(0, 255, 255, 0.3); padding-top: 0.75rem; margin-top: 0.75rem; }
.stat-bonus-selection label, .stat-bonus-row label { display: block; margin-bottom: 0.4rem; font-weight: bold; color: var(--accent-highlight); font-size: 0.9em; }
.stat-bonus-select { width: 100%; padding: 0.4rem; margin-bottom: 0.6rem; font-size: 0.85em; background: var(--bg-primary); border: 1px solid var(--accent-secondary); color: var(--text-light); border-radius: 3px; }
.stat-bonus-select:focus { border-color: var(--accent-primary); outline: none; }
.purchased-flaw-item .flaw-name { font-size: 1em; }
.purchased-flaw-item .flaw-cost { color: var(--error-color); }
.stat-bonus-display { display: flex; gap: var(--gap-small); align-items: center; }
.stat-bonus-display .bonus-label { color: var(--text-muted); font-size: 0.9em; }
.stat-bonus-display .bonus-value { color: var(--success-color); font-weight: bold; font-size: 0.9em; }
.upgrade-preview { margin-top: var(--gap-large); border-top: 1px solid var(--accent-secondary); padding-top: var(--padding-large); }
.upgrade-option { margin-bottom: var(--gap-large); padding: var(--padding-medium); border: 1px solid var(--accent-secondary); border-radius: var(--border-radius-medium); background: var(--bg-primary); }
.upgrade-label { display: flex; justify-content: space-between; align-items: center; cursor: pointer; margin-bottom: var(--gap-small); }
.upgrade-description { margin: var(--gap-small) 0 var(--gap-medium) 0; font-size: 0.9em; line-height: 1.4; color: var(--text-muted); }
.upgrade-quantity { margin-top: var(--padding-medium); display: flex; align-items: center; gap: var(--gap-medium); padding-top: var(--gap-small); border-top: 1px solid rgba(0, 255, 255, 0.2); }
.upgrade-qty { width: 60px; }
.total-cost { margin-top: var(--gap-large); padding: var(--padding-medium); background: var(--bg-secondary); border: 1px solid var(--accent-primary); border-radius: var(--border-radius-medium); font-weight: bold; text-align: center; color: var(--accent-primary); font-size: 1.1em; }
.available-items { margin-top: 2.5rem; }
.available-items h4, .available-items h5 { margin-bottom: var(--gap-large); }
.upgrade-grid { margin: var(--gap-large) 0; }
.upgrade-card { min-height: 160px; border: 2px solid var(--accent-secondary); transition: all 0.3s ease; }
.upgrade-card:hover { border-color: var(--accent-primary); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2); }
.upgrade-card.selected { border-color: var(--accent-primary); background: rgba(0, 255, 255, 0.1); box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3); }
.upgrade-quantity-controls { display: flex; align-items: center; justify-content: center; gap: var(--gap-medium); margin-top: var(--gap-medium); padding: var(--padding-small); background: var(--bg-secondary); border-radius: var(--border-radius-medium); }
.upgrade-toggle-controls { margin-top: var(--gap-medium); text-align: center; }
.quantity-display { font-size: 1.2em; font-weight: bold; color: var(--accent-primary); min-width: 2em; text-align: center; padding: 0.25rem 0.5rem; background: var(--bg-primary); border: 1px solid var(--accent-secondary); border-radius: var(--border-radius-small); }
.ability-card.complex { border: 2px solid var(--accent-secondary); min-height: 200px; }
.ability-card.complex .upgrade-preview { border-top: 2px solid var(--accent-secondary); margin-top: var(--gap-large); padding-top: var(--gap-large); }
.upgrade-selector h6 { color: var(--accent-primary); margin-bottom: var(--gap-medium); font-size: 1.1em; }
.trait-stat-grid, .trait-condition-grid { margin: var(--gap-large) 0; }
.trait-stat-card, .trait-condition-card { min-height: 140px; border: 2px solid var(--accent-secondary); transition: all 0.3s ease; }
.trait-stat-card:hover, .trait-condition-card:hover { border-color: var(--accent-primary); transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 255, 255, 0.2); }
.trait-stat-card.selected, .trait-condition-card.selected { border-color: var(--accent-primary); background: rgba(0, 255, 255, 0.1); box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3); }
.trait-stat-card.disabled, .trait-condition-card.disabled { opacity: 0.6; cursor: not-allowed; }
.stat-toggle-controls, .condition-toggle-controls { margin-top: var(--gap-medium); text-align: center; }
.stat-toggle, .condition-toggle { width: 80px; padding: var(--padding-small) var(--padding-medium); }
.stat-toggle[data-selected="true"], .condition-toggle[data-selected="true"] { background: white; color: var(--bg-primary); border-color: var(--accent-primary); }
.trait-builder-content .builder-step { margin-bottom: 3rem; border-bottom: 1px solid var(--accent-secondary); padding-bottom: var(--padding-large); }
.trait-builder-content .builder-step:last-child { border-bottom: none; }
.trait-builder-content h6 { color: var(--accent-primary); margin-bottom: var(--gap-large); font-size: 1.1em; }
.trait-builder-content .selection-summary { background: var(--bg-secondary); border: 1px solid var(--accent-primary); padding: var(--padding-medium); color: var(--accent-primary); font-weight: bold; margin-top: var(--gap-large); border-radius: var(--border-radius-medium); text-align: center; }

/* Main Pool Overview Box */
.main-pool-overview-box {
    background: var(--bg-secondary);
    border: 2px solid var(--accent-secondary);
    border-radius: var(--border-radius-large);
    padding: var(--padding-large);
    margin-bottom: var(--gap-large);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.main-pool-overview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--gap-large);
    padding-bottom: var(--gap-medium);
    border-bottom: 1px solid var(--accent-secondary);
}

.main-pool-overview-header h3 {
    color: var(--accent-primary);
    margin: 0;
    font-size: 1.4em;
}

/* Main Pool Category Breakdown */
.main-pool-breakdown {
    margin-bottom: var(--gap-large);
}

.main-pool-breakdown h4 {
    color: var(--accent-secondary);
    margin-bottom: var(--gap-medium);
    font-size: 1.1em;
}

/* Selected Main Pool Items within Overview Box */
.main-pool-overview-box .selected-main-pool-items {
    background: var(--bg-primary);
    border: 1px solid var(--accent-secondary);
    border-radius: var(--border-radius-medium);
    padding: var(--padding-medium);
}

.main-pool-overview-box .selected-main-pool-items h4 {
    color: var(--accent-primary);
    margin-bottom: var(--gap-medium);
    font-size: 1.1em;
}

